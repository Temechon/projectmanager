<div class="p-12 w-full h-full bg-white">
    <h1 class="text-4xl font-bold text-darker mb-12">Recherche</h1>

    <div class="w-5/6 mr-auto">

        <div *ngIf="!results || results.length === 0" class="text-gray-400">
            Aucun r√©sultat pour le terme <b>{{query}}</b>
        </div>

        <div *ngFor="let res of results">
            <div *ngFor="let r of res.result" [ngClass]="getColorForType(r.doc.type)"
                class="hover:bg-gray-50 p-4 cursor-pointer border-l-4 mb-4">

                <!-- If the result is a project -->
                <div *ngIf="r.doc.type === 'project'" (click)="goTo(r.doc.p_id)">
                    <div class="flex items-center">
                        <div
                            class="flex items-center justify-center rounded-full text-sm text-white px-3 mr-4 bg-primary-200">
                            {{r.doc.p_internalid}}
                        </div>
                        <div class="text-darker text-2xl font-bold">{{r.doc.p_name}}</div>
                    </div>
                    <div class="flex pt-4 items-center" *ngIf="res.field === 'content'">
                        <div>Description :</div>
                        <div class="text-gray-400 text-sm" [innerHtml]="snippet(r.doc.content)"
                            *ngIf="res.field === 'content'">
                        </div>
                    </div>
                </div>

                <!-- If the result is a report -->
                <div *ngIf="r.doc.type === 'report'" (click)="goToReport(r.doc.p_id, r.id)">
                    <div class="flex items-center">
                        <div
                            class="flex items-center justify-center rounded-full text-sm text-white px-3 mr-4 bg-primary-200">
                            {{r.doc.p_internalid}}
                        </div>
                        <div class="text-darker text-2xl font-bold">
                            {{r.doc.title}}
                            <span class="text-gray-400 text-sm ml-4">{{r.doc.date}}</span>
                        </div>
                    </div>
                    <div class="flex pt-4 items-center" *ngIf="res.field === 'content'">
                        <div>Description :</div>
                        <div class="text-gray-400 text-sm" [innerHtml]="snippet(r.doc.content)"
                            *ngIf="res.field === 'content'">
                        </div>
                    </div>
                </div>

                <!-- If the result is a quick note -->
                <div *ngIf="r.doc.type === 'note'" (click)="goToNote(r.doc.p_id, r.id)">
                    <div class="flex items-center">
                        <div
                            class="flex items-center justify-center rounded-full text-sm text-white px-3 mr-4 bg-primary-200">
                            {{r.doc.p_internalid}}
                        </div>
                        <div class="text-darker text-2xl font-bold">{{r.doc.p_name}}</div>
                    </div>
                    <div class="flex pt-4 items-center" *ngIf="res.field === 'content'">
                        <div>Contenu :</div>
                        <div class="text-gray-400 text-sm" [innerHtml]="snippet(r.doc.content)"
                            *ngIf="res.field === 'content'">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>